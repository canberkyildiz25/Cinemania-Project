{"version":3,"file":"index-BurqpUq7.js","sources":["../../src/app/pages/home/index.js"],"sourcesContent":["// src/app/pages/home/index.js\nimport { showLoader, hideLoader } from '../../common/loader.js';\nimport { fetchTrendingMovies, fetchUpcomingMovies } from '../../data/movies-data.js';\nimport {\n  renderMovieCard,\n  updateHeroWithMovie,\n  renderUpcomingSection,\n} from '../../common/ui-helpers.js';\n\n// DOM hazır olunca çalış\n// (main.js zaten DOMContentLoaded içinde çağırıyor ama \n// dinamik import olduğu için burası kendi başına çalışır)\nconst initHome = async () => {\n  const heroSection = document.getElementById('home-hero');\n  const heroContent = heroSection?.querySelector('.hero-content');\n  const trendsGrid = document.getElementById('weekly-trends-grid');\n  const upcomingContainer = document.getElementById('upcoming-container');\n\n  if (!heroSection && !trendsGrid) return; // Anasayfada değilsek dur\n\n  showLoader();\n\n  try {\n    const [dayTrends, weekTrends, upcomingData] = await Promise.all([\n      fetchTrendingMovies('day'),\n      fetchTrendingMovies('week'),\n      fetchUpcomingMovies()\n    ]);\n\n    // --- Hero İşlemleri ---\n    let heroMovie = null;\n    if (dayTrends?.results?.length) {\n      const rand = Math.floor(Math.random() * Math.min(5, dayTrends.results.length));\n      heroMovie = dayTrends.results[rand];\n    } else if (weekTrends?.results?.length) {\n      heroMovie = weekTrends.results[0];\n    }\n\n    if (heroMovie) {\n      await updateHeroWithMovie(heroMovie.id, heroSection, heroContent);\n    }\n\n    // --- Weekly Trends ---\n    if (weekTrends?.results?.length && trendsGrid) {\n      trendsGrid.innerHTML = weekTrends.results\n        .slice(0, 3)\n        .map(m => renderMovieCard(m))\n        .join('');\n        \n      trendsGrid.addEventListener('click', (e) => {\n        const card = e.target.closest('.movie-card');\n        if (card && card.dataset.id) {\n          // Kart tıklandığında hero'yu güncelle\n          updateHeroWithMovie(card.dataset.id, heroSection, heroContent);\n          window.scrollTo({ top: 0, behavior: 'smooth' });\n        }\n      });\n    }\n\n    // --- Upcoming ---\n    if (upcomingData?.results?.length && upcomingContainer) {\n      const rand = Math.floor(Math.random() * Math.min(10, upcomingData.results.length));\n      const movie = upcomingData.results[rand];\n      renderUpcomingSection(movie, upcomingContainer);\n    }\n\n  } catch (error) {\n    console.error(\"Anasayfa yükleme hatası:\", error);\n  } finally {\n    hideLoader();\n  }\n};\n\ninitHome();"],"names":["initHome","heroSection","heroContent","trendsGrid","upcomingContainer","showLoader","dayTrends","weekTrends","upcomingData","fetchTrendingMovies","fetchUpcomingMovies","heroMovie","rand","updateHeroWithMovie","m","renderMovieCard","card","movie","renderUpcomingSection","error","hideLoader"],"mappings":"yJAYA,MAAMA,EAAW,SAAY,CAC3B,MAAMC,EAAc,SAAS,eAAe,WAAW,EACjDC,EAAcD,GAAa,cAAc,eAAe,EACxDE,EAAa,SAAS,eAAe,oBAAoB,EACzDC,EAAoB,SAAS,eAAe,oBAAoB,EAEtE,GAAI,GAACH,GAAe,CAACE,GAErB,CAAAE,EAAU,EAEV,GAAI,CACF,KAAM,CAACC,EAAWC,EAAYC,CAAY,EAAI,MAAM,QAAQ,IAAI,CAC9DC,EAAoB,KAAK,EACzBA,EAAoB,MAAM,EAC1BC,EAAmB,CACzB,CAAK,EAGD,IAAIC,EAAY,KAChB,GAAIL,GAAW,SAAS,OAAQ,CAC9B,MAAMM,EAAO,KAAK,MAAM,KAAK,OAAM,EAAK,KAAK,IAAI,EAAGN,EAAU,QAAQ,MAAM,CAAC,EAC7EK,EAAYL,EAAU,QAAQM,CAAI,CACpC,MAAWL,GAAY,SAAS,SAC9BI,EAAYJ,EAAW,QAAQ,CAAC,GAyBlC,GAtBII,GACF,MAAME,EAAoBF,EAAU,GAAIV,EAAaC,CAAW,EAI9DK,GAAY,SAAS,QAAUJ,IACjCA,EAAW,UAAYI,EAAW,QAC/B,MAAM,EAAG,CAAC,EACV,IAAIO,GAAKC,EAAgBD,CAAC,CAAC,EAC3B,KAAK,EAAE,EAEVX,EAAW,iBAAiB,QAAU,GAAM,CAC1C,MAAMa,EAAO,EAAE,OAAO,QAAQ,aAAa,EACvCA,GAAQA,EAAK,QAAQ,KAEvBH,EAAoBG,EAAK,QAAQ,GAAIf,EAAaC,CAAW,EAC7D,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,SAAU,EAElD,CAAC,GAICM,GAAc,SAAS,QAAUJ,EAAmB,CACtD,MAAMQ,EAAO,KAAK,MAAM,KAAK,OAAM,EAAK,KAAK,IAAI,GAAIJ,EAAa,QAAQ,MAAM,CAAC,EAC3ES,EAAQT,EAAa,QAAQI,CAAI,EACvCM,EAAsBD,EAAOb,CAAiB,CAChD,CAEF,OAASe,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,QAAC,CACCC,EAAU,CACZ,EACF,EAEApB,EAAQ"}